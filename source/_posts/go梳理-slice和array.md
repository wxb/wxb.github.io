---
title: go梳理-理清赋值和传参的底层原理
categories:
  - golang
tags:
  - slice
  - array
  - string
toc: true
author: 虢國技酱
comments: true
date: 2019-11-18 18:05:46
description:
original:
permalink:
---

Go语言中数组、字符串和切片三者是密切相关的数据结构。这三种数据类型，在底层原始数据有着相同的内存结构，在上层，因为语法的限制而有着不同的行为表现

* 首先，Go语言的数组是一种值类型，虽然数组的元素可以被修改，但是数组本身的赋值和函数传参都是以整体复制的方式处理的。
* Go语言字符串底层数据也是对应的字节数组，但是字符串的只读属性禁止了在程序中对底层字节数组的元素的修改。字符串赋值只是复制了数据地址和对应的长度，而不会导致底层数据的复制
* 切片的行为更为灵活，切片的结构和字符串结构类似，但是解除了只读限制。切片的底层数据虽然也是对应数据类型的数组，但是每个切片还有独立的长度和容量信息，切片赋值和函数传参数时也是将切片头信息部分按传值方式处理。因为切片头含有底层数据的指针，所以它的赋值也不会导致底层数据的复制

其实Go语言的赋值和函数传参规则很简单，除了闭包函数以引用的方式对外部变量访问之外，其它赋值和函数传参数都是以传值的方式处理。要理解数组、字符串和切片三种不同的处理方式的原因需要详细了解它们的底层数据结构。

<!-- more -->

## 概念

### 值类型和引用类型

### 函数的传值和传引用

## 1. 结构

### 1.1 字符串

### 1.2 数组

### 1.3 切片

## 2. 复制

### 2.1 指针复制

### 2.2 底层值复制

## 3. 性能

## 4. 闭包
